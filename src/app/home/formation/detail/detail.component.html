<!-- Content Header (Page header) -->
<div class="content-header">
  <div class="d-flex align-items-center">
    <div class="mr-auto">
      <div class="d-inline-block align-items-center">
        <nav>
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a href="#"
                ><h6><span class="glyphicon glyphicon-cog"></span></h6
              ></a>
            </li>

            <li class="breadcrumb-item active" aria-current="page">
              <h4>Manage training</h4>
            </li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
</div>

<!-- Main content -->
<section class="content">
  <div class="row">
    <div class="col-12">
      <div class="card p-15 h-89">
        <!-- Nav tabs -->
        <ul class="nav nav-pills rounded nav-justified">
          <li class="nav-item">
            <a
              href="#navpills-1"
              class="nav-link active"
              data-toggle="tab"
              aria-expanded="false"
              >GEERAL</a
            >
          </li>
          <li class="nav-item">
            <a href="#navpills-2" class="nav-link" data-toggle="tab">CONTENT</a>
          </li>

          <li class="nav-item">
            <a
              href="#navpills-4"
              class="nav-link"
              data-toggle="tab"
              aria-expanded="true"
              >MEMBERS</a
            >
          </li>
        </ul>

        <!-- /.box-body -->
      </div>
      <!-- /.box -->

      <!-- Tab panes -->
      <div class="tab-content">
        <div id="navpills-1" class="tab-pane active">
          <div class="box-body">
            <div class="col-12">
              <div class="card">
                <!-- Default box -->
                <div class="box">
                  <div class="box-header with-border">
                    <h4 class="box-title">EDIT TRAINING</h4>
                  </div>
                  <div class="box-body">
                    <form
                      [formGroup]="formFormation"
                      (ngSubmit)="EditFormation()"
                    >
                      <div id="slimtest3">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="p-20">
                              <div class="box-body form-element">
                                <input
                                  class="form-control input-lg"
                                  type="text"
                                  placeholder=".input-lg"
                                  formControlName="titre"
                                />
                                <br /><br />
                                <input
                                  class="form-control"
                                  type="text"
                                  placeholder="Default input"
                                  formControlName="description"
                                />
                                <br /><br />
                                <input
                                  class="form-control input-sm"
                                  type="date"
                                  placeholder=".input-sm"
                                  formControlName="date_deDebut"
                                />
                                <br /><br />
                                <input
                                  class="form-control input-sm"
                                  type="date"
                                  placeholder=".input-sm"
                                  formControlName="date_defin"
                                />
                              </div>
                            </div>
                          </div>
                          <div class="col-md-5">
                            <span>Upload Anonther Image :</span>
                            <br />
                            <input
                              class="form-control"
                              type="file"
                              id="formFile"
                              type="file"
                              formControlName="file"
                              formControlName="photo"
                              multiple
                              (change)="handleFileInput($event)"
                            />
                            <br />
                            <div class="b-dashed">
                              <img
                                [src]="photo"
                                class="img-responsive"
                                alt=""
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="form-actions mt-25">
                        <button type="submit" class="btn btn-success">
                          Save <i class='fas fa-highlighter' style='font-size:15px'></i>
                        </button>

                        
                      </div>
                    </form>
                  </div>
                </div>
                <!-- /.box-body -->
              </div>
              <!-- /.box -->
            </div>
          </div>
        </div>

        <div id="navpills-2" class="tab-pane">
          <br /><br />
          <div>
            <button
              type="button"
              data-toggle="modal"
              data-target="#myModal"
              class="waves-effect waves-light btn btn-rounded btn-primary-light mb-5"
            >
              <i class="ti-plus"></i> Add new theme
            </button>
          </div>

          <br />
          <!-- Categroy 2 -->
          <div class="row">
            <div class="col-1"></div>

            <!-- End Categroy 2 -->
            <div class="col-10">
              <div class="" *ngFor="let item of theme">
                <div class="card" style="background-color: 	rgb(255,255,255)">
                  <div class="card-header">
                    <h4>
                      <button
                        mat-mini-fab
                        disabled
                        aria-label="Example icon button with a home"
                      >
                        <mat-icon>bookmark</mat-icon>
                      </button>
                      {{ item.theme_titre }}
                    </h4>

                    
                    <ul class="box-controls pull-right">
                      <li class="dropdown">
                        <a data-toggle="dropdown" href="#"
                          ><i class="ti-more-alt rotate-90"></i
                        ></a>
                        <div class="dropdown-menu dropdown-menu-right">
                          <a
                            class="dropdown-item"

                            data-toggle="modal"
                            data-target="#myModal7"
                            (click)="getThemeById(item.id)"
                            >  Edit</a
                            >
                          <a
                            class="dropdown-item"
                            (click)="removeTheme(item.id)"
                            >   Delate</a
                          >
                        </div>
                      </li>
                      <li><a class="btn-slide" href="#"></a></li>
                      <li><a class="btn-fullscreen" href="#"></a></li>
                    </ul>
                  </div>

                  <div class="box-body" *ngFor="let rol of item.etapes">
                    <mat-accordion>
                      <mat-expansion-panel
                        hideToggle
                        style="background-color: rgb(240,240,240)"
                      >
                        <div>
                          <div class="row">
                            <div class="col-4" *ngFor="let cr of rol.videos">
                              <div class="box mb-15 pull-up">
                                <div class="box-body">
                                  <ul class="box-controls pull-right">
                                    <li class="dropdown">
                                      <a data-toggle="dropdown" href="#"
                                        ><i class="ti-more-alt rotate-90"></i
                                      ></a>
                                      <div
                                        class="dropdown-menu dropdown-menu-right"
                                      >
                                        <a class="dropdown-item">
                                          <i
                                            class="fa fa-trash"
                                            aria-hidden="true"
                                          ></i>
                                          Delate</a
                                        >
                                        <a
                                          class="dropdown-item"
                                          [routerLink]="[
                                            '/home/editCours',
                                            cr.id
                                          ]"
                                          data-toggle="modal"
                                          data-target="#modal-center7"
                                          ><i class="fa fa-edit"></i> Edit</a
                                        >
                                      </div>
                                    </li>
                                    <li><a class="btn-slide" href="#"></a></li>
                                    <li>
                                      <a class="btn-fullscreen" href="#"></a>
                                    </li>
                                  </ul>
                                  <div
                                    class="d-flex align-items-center justify-content-between"
                                  >
                                    <div class="d-flex align-items-center">
                                      <div
                                        class="mr-15 bg-primary-light h-50 w-50 l-h-60 rounded text-center"
                                      >
                                        <i
                                          class="fa fa-play-circle"
                                          style="font-size: 24px"
                                        ></i>
                                      </div>
                                      <div
                                        class="d-flex flex-column font-weight-500"
                                      >
                                        <a
                                          href="#"
                                          class="text-dark hover-primary mb-1 font-size-16"
                                          >{{ cr.name }}</a
                                        >
                                        <span class="text-fade">Taille</span>
                                      </div>
                                    </div>
                                  </div>
                                  <!-- <div class="d-flex align-items-center justify-content-between mt-5">
                                <div class="">
                                 
                                </div>
                                <div>
                                  <div>{{ cr.date }}</div>
                                </div>
                              </div> -->
                                </div>
                              </div>
                            </div>

                            <div class="col-4" *ngFor="let cr of rol.cours">
                              <div class="box mb-15 pull-up">
                                <div class="box-body">
                                  <ul class="box-controls pull-right">
                                    <li class="dropdown">
                                      <a data-toggle="dropdown" href="#"
                                        ><i class="ti-more-alt rotate-90"></i
                                      ></a>
                                      <div
                                        class="dropdown-menu dropdown-menu-right"
                                      >
                                        <a class="dropdown-item">
                                          <i
                                            class="fa fa-trash"
                                            aria-hidden="true"
                                          ></i>
                                          Delate</a
                                        >
                                        <a
                                          class="dropdown-item"
                                          [routerLink]="[
                                            '/home/editCours',
                                            cr.id
                                          ]"
                                          data-toggle="modal"
                                          data-target="#modal-center7"
                                          ><i class="fa fa-edit"></i> Edit</a
                                        >
                                      </div>
                                    </li>
                                    <li>
                                      <a class="btn-slide" href="#"></a>
                                    </li>
                                    <li>
                                      <a class="btn-fullscreen" href="#"></a>
                                    </li>
                                  </ul>
                                  <div
                                    class="d-flex align-items-center justify-content-between"
                                  >
                                    <div class="d-flex align-items-center">
                                      <div
                                        class="mr-15 bg-warning-light h-50 w-50 l-h-60 rounded text-center"
                                      >
                                        <span
                                          class="icon-Book-open font-size-24"
                                          ><span class="path1"></span
                                          ><span class="path2"></span
                                        ></span>
                                      </div>
                                      <div
                                        class="d-flex flex-column font-weight-500"
                                      >
                                        <a
                                          href="#"
                                          class="text-dark hover-primary mb-1 font-size-16"
                                          >{{ cr.description }}</a
                                        >
                                        <span class="text-fade">{{
                                          cr.date
                                        }}</span>
                                      </div>
                                    </div>
                                  </div>
                                  <!-- <div class="d-flex align-items-center justify-content-between mt-5">
                                      <div class="">
                                       
                                      </div>
                                      <div>
                                        <div>{{ cr.date }}</div>
                                      </div>
                                    </div> -->
                                </div>
                              </div>
                            </div>
                      
                            <div class="col-4" *ngFor="let cr of rol.quizzes">
                              <div class="box mb-15 pull-up">
                                <div class="box-body">
                                  <ul class="box-controls pull-right">
                                    <li class="dropdown">
                                      <a data-toggle="dropdown" href="#"
                                        ><i class="ti-more-alt rotate-90"></i
                                      ></a>
                                      <div
                                        class="dropdown-menu dropdown-menu-right"
                                      >
                                        <a class="dropdown-item">
                                         
                                          Delate</a
                                        >
                                        <a
                                          class="dropdown-item"
                                          [routerLink]="[
                                            '/home/editCours',
                                            cr.id
                                          ]"
                                          data-toggle="modal"
                                          data-target="#modal-center7"
                                          > Edit</a
                                        >
                                      </div>
                                    </li>
                                    <li>
                                      <a class="btn-slide" href="#"></a>
                                    </li>
                                    <li>
                                      <a class="btn-fullscreen" href="#"></a>
                                    </li>
                                  </ul>
                                  <div
                                    class="d-flex align-items-center justify-content-between"
                                  >
                                    <div class="d-flex align-items-center">
                                      <div
                                        class="mr-15 bg-danger-light h-50 w-50 l-h-60 rounded text-center"
                                      >
                                        <i
                                          class="fa fa-clipboard"
                                          style="font-size: 24px"
                                        ></i>
                                      </div>
                                      <div
                                        class="d-flex flex-column font-weight-500"
                                      >
                                        <a
                                          [routerLink]="['/home/list', cr.id]"
                                          class="text-dark hover-primary mb-1 font-size-16"
                                          >{{ cr.description }}</a
                                        >
                                        <span class="text-fade"> </span>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <mat-expansion-panel-header>
                          <mat-panel-title>
                            <i class="ti-bookmark"></i>
                            <strong>{{ rol.step_titre }}</strong>
                          </mat-panel-title>

                          <mat-panel-description> </mat-panel-description>
                        </mat-expansion-panel-header>
                      </mat-expansion-panel>
                    </mat-accordion>
                  </div>

                  <br />
                  <div class="">
                    <h4 style="text-align: right">
                      <a
                        [routerLink]="['/home/theme', item.id]"
                        class="glyphicon-class"
                        style="margin-right: 22px"
                        >More Details</a
                      >
                      <span class="glyphicon glyphicon--right"></span>
                    </h4>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-1"></div>
        </div>

        <div id="navpills-4" class="tab-pane">
          <div class="row">
            <div class="col-3"></div>
            <div class="col-7">
              <div
                class="tab-pane animation-fade"
                id="category-4"
                role="tabpanel"
              >
                <div
                  class="panel-group panel-group-simple panel-group-continuous"
                  id="accordion3"
                  aria-multiselectable="true"
                  role="tablist"
                >
                  <!-- Question 11 -->
                  <form>
                    <div class="tab-pane active" id="control-sidebar-home-tab">
                      <div class="flexbox">
                        <a href="javascript:void(0)" class="text-grey"> </a>
                        <p>Users</p>
                        <a
                          href="javascript:void(0)"
                          class="text-right text-grey"
                        ></a>
                      </div>
                      <div
                        class="lookup lookup-sm lookup-right d-none d-lg-block"
                      >
                        <input
                          type="text"
                          name="s"
                          placeholder="Search"
                          class="w-p100"
                          [(ngModel)]="term"
                        />
                      </div>

                      <div *ngIf="term != ''">
                        <div
                          class="media-list media-list-hover mt-20"
                          *ngFor="let userr of user | rechercheMembre: term"
                        >
                          <div class="media py-10 px-0">
                            <a class="avatar avatar-lg status-success" [routerLink]="['/home/chatt', userr.id]">
                              <img
                                src="{{ base_picture + userr.photo }}"
                                alt="..."
                              />
                            </a>
                            <div class="media-body">
                              <p class="font-size-16">
                                <a class="hover-primary" href="#"
                                  ><strong>{{ userr.username }}</strong></a
                                >
                              </p>

                              <span *ngFor="let rol of userr.roles">{{
                                rol.name
                              }}</span> 
                            </div>
                            <div class="media-right gap-items">
                              <a
                                href="javascript:void(0)"
                                data-toggle="modal"
                                class="text-info mr-10"
                                data-toggle="tooltip"
                                data-original-title="ajouter"
                                (click)="addUserToFormation(userr.id)"
                              >
                                <i class="ti-plus"></i>
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </form>

                  <!-- /.tab-pane -->
                  <!-- Settings tab content -->

                  <!-- End Question 13 -->
                </div>
              </div>

              <!-- End Categroy 4 -->
            </div>
          </div>

          <br /><br />
          <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-7">
              <div class="card">
                <div>
                  <h4 style="text-align: center">Members</h4>
                  <div
                    class="media-list media-list-hover mt-20"
                    *ngFor="let listt of listUser"
                  >
                    <div class="media py-10 px-0">
                      <a class="avatar avatar-lg " href="#">
                        <img
                          src="{{ base_picture + listt.users.photo }}"
                          alt="..."
                        />
                      </a>
                      <div class="media-body">
                        <p class="font-size-16">
                          <a class="hover-primary w3-panel w3-border" href="#" 
                            ><strong>{{ listt.users.username }}</strong></a
                          >
                        </p>
                        <span *ngFor="let rol of listt.users.roles">{{
                          rol.name
                        }}</span>
                      </div>
                      <div class="media-right gap-items">
                        <a
                          href="javascript:void(0)"
                          data-toggle="modal"
                          class="text-info mr-10"
                          data-toggle="tooltip"
                          data-original-title="ajouter"
                          (click)="removeUserByDemabde(listt.id)"
                        >
                          <i class="fa fa-trash" style="color:blue" aria-hidden="true"></i>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-2"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- /.box-body -->
  </div>
  <!-- /.row -->
</section>
<!-- /.content -->

<!-- /.modal  1-->
<div
  id="myModal"
  class="modal fade in"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">ADD New Theme</h4>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-hidden="true"
        >
          
        </button>
      </div>
      <div class="modal-body">
        <form class="form-horizontal" [formGroup]="formTheme">
          <div class="form-group">
            <label class="col-md-12">Theme</label>
            <div class="col-md-12">
              <input
                type="text"
                class="form-control"
                placeholder="title of theme"
                formControlName="theme_titre"
              />
              <small style="color:red;" *ngIf="!formTheme.controls['theme_titre'].valid && formTheme.controls['theme_titre'].touched">
                The title is a required field
                   
                  </small >
            </div>
          </div>

          <div class="btn-text-right">
          
          
            <button
            type="button"
            class="btn btn-success"
            data-dismiss="modal"
            (click)="addTheme()"
            class="btn btn-primary"     >
            Add
          </button>
         
         
          </div>
        </form>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>

<!-- /.modal 2 -->
<div
  id="myModal7"
  class="modal fade in"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">Edit Theme</h4>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-hidden="true"
        >
          
        </button>
      </div>
      <div class="modal-body">
        <form
          class="form-horizontal"
          #updateform="ngForm"
          [formGroup]="formTheme"
        >
          <div class="form-group">
            <label class="col-md-12">Theme</label>
            <div class="col-md-12">
              <input
                type="text"
                class="form-control"
                placeholder=""
                formControlName="theme_titre"
              />
              <small style="color:red;" *ngIf="!formTheme.controls['theme_titre'].valid && formTheme.controls['theme_titre'].touched">
                The Theme is a required field
                   
                  </small >
            </div>
          </div>

          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-success"
              data-dismiss="modal"
              (click)="EditTheme()"
            >
              Edit
            </button>
            <button
              type="button"
              class="btn btn-default float-right"
              data-dismiss="modal"
            >
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.content-wrapper -->

<!-- /.modal -->

